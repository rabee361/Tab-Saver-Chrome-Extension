async function saveCurrentTab(){let e=await chrome.tabs.query({active:!0,currentWindow:!0}),t=e[0];chrome.storage.local.get(["savedTabs"],function(e){let a=e.savedTabs||[];a.some(e=>e.url===t.url)||(a.push({id:Date.now(),title:t.title,url:t.url,favicon:`https://s2.googleusercontent.com/s2/favicons?domain=${new URL(t.url).hostname}`}),chrome.storage.local.set({savedTabs:a},function(){loadSavedTabs()}))})}function loadSavedTabs(){let e=document.getElementById("savedTabs");e.innerHTML="",chrome.storage.local.get(["savedTabs"],function(t){let a=t.savedTabs||[];if(0===a.length){e.innerHTML="<p>No saved tabs</p>";return}a.forEach(t=>{let a=document.createElement("div");a.className="tab-tag",a.dataset.id=t.id,a.dataset.url=t.url;let n=document.createElement("img");n.src=t.favicon,a.appendChild(n);let s=document.createElement("span");s.className="tab-tag-title",s.textContent=t.title,a.appendChild(s),a.addEventListener("click",function(){chrome.tabs.create({url:t.url})}),e.appendChild(a)})})}function removeSelectedTab(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){let t=e[0].url;chrome.storage.local.get(["savedTabs"],function(e){let a=e.savedTabs||[];a=a.filter(e=>e.url!==t),chrome.storage.local.set({savedTabs:a},function(){loadSavedTabs()})})})}document.addEventListener("DOMContentLoaded",function(){loadSavedTabs(),document.getElementById("saveTab").addEventListener("click",saveCurrentTab),document.getElementById("removeTab").addEventListener("click",removeSelectedTab)});